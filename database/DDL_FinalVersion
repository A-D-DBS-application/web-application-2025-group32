-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.Feedback (
  feedback_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  reservation_id bigint NOT NULL,
  netheid_score smallint,
  wifi_score smallint,
  ruimte_score smallint,
  stilte_score smallint,
  algemene_score smallint,
  extra_opmerkingen character varying,
  is_reviewed boolean DEFAULT false,
  reviewed_at timestamp without time zone,
  organization_id integer NOT NULL DEFAULT 1,
  CONSTRAINT Feedback_pkey PRIMARY KEY (feedback_id),
  CONSTRAINT Feedback_reservation_id_fkey FOREIGN KEY (reservation_id) REFERENCES public.reservation(res_id),
  CONSTRAINT Feedback_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id)
);
CREATE TABLE public.building (
  building_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  adress character varying NOT NULL,
  organization_id integer NOT NULL DEFAULT 1,
  floor bigint,
  CONSTRAINT building_pkey PRIMARY KEY (building_id),
  CONSTRAINT building_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id)
);
CREATE TABLE public.desk (
  desk_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  desk_number bigint NOT NULL,
  building_id bigint NOT NULL,
  dienst character varying,
  screen character varying DEFAULT 'NULL'::text,
  chair character varying,
  organization_id integer NOT NULL DEFAULT 1,
  CONSTRAINT desk_pkey PRIMARY KEY (desk_id),
  CONSTRAINT Desk_building_id_fkey FOREIGN KEY (building_id) REFERENCES public.building(building_id),
  CONSTRAINT desk_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id)
);
CREATE TABLE public.organization (
  organization_id integer NOT NULL DEFAULT nextval('organization_organization_id_seq'::regclass),
  bedrijf character varying NOT NULL,
  created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  is_active boolean DEFAULT true,
  logo_filename character varying DEFAULT 'Logo_colruyt_group.png'::character varying,
  CONSTRAINT organization_pkey PRIMARY KEY (organization_id)
);
CREATE TABLE public.reservation (
  res_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  starttijd timestamp with time zone NOT NULL,
  eindtijd timestamp without time zone NOT NULL,
  desk_id bigint NOT NULL,
  user_id bigint NOT NULL,
  modified_by_admin boolean DEFAULT false,
  organization_id integer NOT NULL DEFAULT 1,
  CONSTRAINT reservation_pkey PRIMARY KEY (res_id),
  CONSTRAINT reservation_desk_id_fkey FOREIGN KEY (desk_id) REFERENCES public.desk(desk_id),
  CONSTRAINT reservation_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.user(user_id),
  CONSTRAINT reservation_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id)
);
CREATE TABLE public.user (
  user_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  user_name character varying NOT NULL,
  user_last_name character varying,
  dienst character varying,
  user_email character varying,
  role character varying,
  organization_id integer NOT NULL DEFAULT 1,
  CONSTRAINT user_pkey PRIMARY KEY (user_id),
  CONSTRAINT user_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id)
);
CREATE TABLE public.analytics_stopwords (
  stopword_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  word character varying(100) NOT NULL,
  organization_id integer NOT NULL DEFAULT 1,
  created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT analytics_stopwords_pkey PRIMARY KEY (stopword_id),
  CONSTRAINT analytics_stopwords_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id),
  CONSTRAINT analytics_stopwords_unique_word_org UNIQUE (word, organization_id)
);
CREATE TABLE public.analytics_sentiment_words (
  sentiment_word_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  word character varying(100) NOT NULL,
  sentiment_type character varying(10) NOT NULL,
  organization_id integer NOT NULL DEFAULT 1,
  created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT analytics_sentiment_words_pkey PRIMARY KEY (sentiment_word_id),
  CONSTRAINT analytics_sentiment_words_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id),
  CONSTRAINT analytics_sentiment_words_unique_word_type_org UNIQUE (word, sentiment_type, organization_id),
  CONSTRAINT check_sentiment_type CHECK (sentiment_type IN ('positief', 'negatief'))
);
CREATE TABLE public.analytics_topic_categories (
  topic_category_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  category_name character varying(100) NOT NULL,
  organization_id integer NOT NULL DEFAULT 1,
  created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT analytics_topic_categories_pkey PRIMARY KEY (topic_category_id),
  CONSTRAINT analytics_topic_categories_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id),
  CONSTRAINT analytics_topic_categories_unique_name_org UNIQUE (category_name, organization_id)
);
CREATE TABLE public.analytics_topic_keywords (
  topic_keyword_id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  topic_category_id bigint NOT NULL,
  keyword character varying(100) NOT NULL,
  organization_id integer NOT NULL DEFAULT 1,
  created_at timestamp without time zone DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT analytics_topic_keywords_pkey PRIMARY KEY (topic_keyword_id),
  CONSTRAINT analytics_topic_keywords_category_id_fkey FOREIGN KEY (topic_category_id) REFERENCES public.analytics_topic_categories(topic_category_id),
  CONSTRAINT analytics_topic_keywords_organization_id_fkey FOREIGN KEY (organization_id) REFERENCES public.organization(organization_id),
  CONSTRAINT analytics_topic_keywords_unique_keyword_category_org UNIQUE (keyword, topic_category_id, organization_id)
);
