{% extends 'base.html' %}

{% block title %}Home - Colruyt Reservaties{% endblock %}

{% block hero %}
  <h1 style="margin:0;font-size:2.2rem">Welkom, {{ user_display or user }}</h1>
  <p style="margin:8px 0 0 0;opacity:0.95;font-size:1.05rem">Beheer je bureau reservaties</p>
{% endblock %}

{% block content %}
<div style="display:flex;gap:28px;margin-top:0">
  <aside style="width:280px;flex-shrink:0">
    <div class="card">
      <h3 style="margin:0 0 18px 0;color:var(--primary);font-size:1.15rem">Snelle acties</h3>
      <div style="display:flex;flex-direction:column;gap:12px">
        <a class="btn" href="{{ url_for('main.reserve') }}">Nieuwe reservatie</a>
        <a class="btn btn-secondary" href="{{ url_for('main.mijn_reservaties') }}">Mijn reservaties</a>
        {% if is_admin %}
        <a class="btn" href="{{ url_for('main.feedback_analysis') }}">ðŸ“Š Feedback analyse</a>
        {% endif %}
      </div>
    </div>
  </aside>

  <div style="flex:1">
    <div class="card" style="margin-bottom:28px">
      <h2 style="margin:0 0 6px 0;color:var(--primary)">Aankomende reservaties</h2>
      <p class="small" style="margin-bottom:20px;color:var(--muted)">Je reservaties voor de komende week</p>
      {% if upcoming and upcoming|length > 0 %}
      <table class="data-table">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Tijd</th>
            <th>Bureau</th>
            <th>Gebouw</th>
          </tr>
        </thead>
        <tbody>
          {% for r in upcoming %}
          <tr>
            <td>{{ r.starttijd.strftime('%d/%m/%Y') if r.starttijd else '-' }}</td>
            <td>{{ r.starttijd.strftime('%H:%M') if r.starttijd else '-' }} - {{ r.eindtijd.strftime('%H:%M') if r.eindtijd else '-' }}</td>
            <td>Bureau {{ r.desk_number or 'N/A' }}</td>
            <td>{{ r.building_adress or 'N/A' }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <div style="padding:40px;text-align:center;color:var(--muted)">
        <p>Geen aankomende reservaties.</p>
        <a class="btn" href="{{ url_for('main.reserve') }}" style="margin-top:16px;display:inline-block">Maak een reservatie</a>
      </div>
      {% endif %}
    </div>

    {% if completed and completed|length > 0 %}
    <div class="card">
      <h2 style="margin:0 0 6px 0;color:var(--primary)">Voltooide reservaties</h2>
      <p class="small" style="margin-bottom:20px;color:var(--muted)">Geef feedback over je ervaring</p>
      <table class="data-table">
        <thead>
          <tr>
            <th>Datum</th>
            <th>Tijd</th>
            <th>Bureau</th>
            <th>Gebouw</th>
            <th>Feedback</th>
          </tr>
        </thead>
        <tbody>
          {% for r in completed %}
          <tr>
            <td>{{ r.starttijd.strftime('%d/%m/%Y') if r.starttijd else '-' }}</td>
            <td>{{ r.starttijd.strftime('%H:%M') if r.starttijd else '-' }} - {{ r.eindtijd.strftime('%H:%M') if r.eindtijd else '-' }}</td>
            <td>Bureau {{ r.desk_number or 'N/A' }}</td>
            <td>{{ r.building_adress or 'N/A' }}</td>
            <td>
              {% if r.has_feedback %}
                <span style="color:var(--success);font-size:0.9rem;margin-right:8px">âœ“ Gegeven</span>
                <a class="btn-secondary" href="{{ url_for('main.feedback', res_id=r.res_id) }}" style="padding:6px 12px;font-size:0.85rem">Bewerk</a>
              {% else %}
                <a class="btn" href="{{ url_for('main.feedback', res_id=r.res_id) }}" style="padding:6px 12px;font-size:0.85rem">Geef feedback</a>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% endif %}
  </div>
</div>
{% endblock %}