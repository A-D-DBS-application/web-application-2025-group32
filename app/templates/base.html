<!DOCTYPE html>
<html lang="nl">
<head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <title>{% block title %}Colruyt Reservaties{% endblock %}</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
        <style>
            html { touch-action: manipulation; }
            input, button, select, textarea { font-size: 16px; }
        </style>
        {% block head %}{% endblock %}
</head>
<body>
    <header class="site-header">
        <div class="container header-inner">
            <a class="logo" href="{{ url_for('home') if (user or user_display) else url_for('login') }}">
                <img src="{{ url_for('static', filename='images/Logo_colruyt_group.png') }}" alt="Colruyt Group" style="height:40px" />
            </a>
            <nav class="nav">
                {% if user or user_display %}
                    {% if is_admin %}
                    <div class="dropdown">
                        <button class="dropdown-btn">Beheer ▾</button>
                        <div class="dropdown-content">
                            <a href="{{ url_for('main.feedback_analysis') }}">Feedback analyse</a>
                            <a href="{{ url_for('main.admin_dashboard') }}">Bureaubeheer</a>
                            <a href="{{ url_for('main.admin_reservations_overview') }}">Reservaties beheren</a>
                        </div>
                    </div>
                    {% endif %}
                    <a href="{{ url_for('main.reserve') }}">Nieuwe reservatie</a>
                    <a href="{{ url_for('main.mijn_reservaties') }}">Mijn reservaties</a>
                    <a href="{{ url_for('logout') }}">Afmelden</a>
                {% else %}
                    <a href="{{ url_for('login') }}">Aanmelden</a>
                {% endif %}
            </nav>
        </div>
        {% if user or user_display %}
        <div class="hero">
            <div class="container hero-inner">
                {% block hero %}{% endblock %}
            </div>
        </div>
        {% endif %}
    </header>

    <main class="container main-content">
        {% with messages = get_flashed_messages() %}
            {% if messages %}
                <div class="flash">
                    {% for m in messages %}
                        <div class="flash-item">{{ m }}</div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>© Colruyt Group — Reservatie Systeem</p>
        </div>
    </footer>

    <script>
        // Dropdown toggle functionaliteit
        document.addEventListener('DOMContentLoaded', function() {
            const dropdown = document.querySelector('.dropdown');
            const dropdownBtn = document.querySelector('.dropdown-btn');
            
            if (dropdownBtn) {
                // Toggle dropdown bij klik op button
                dropdownBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    dropdown.classList.toggle('active');
                });
                
                // Sluit dropdown bij klik buiten dropdown
                document.addEventListener('click', function(e) {
                    if (!dropdown.contains(e.target)) {
                        dropdown.classList.remove('active');
                    }
                });
            }
        });
    </script>
</body>
</html>